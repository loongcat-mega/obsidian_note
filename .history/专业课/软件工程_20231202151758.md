
## 类的分析与设计

类的分析与设计的目的是将需求阶段得到的信息加以整理和归纳，以开发者的视角抽象出相对稳定的静态结构。





## 设计优化

高质量的建模要以简单和小为基本观点

小规模设计师设计优化的基础，两个一般性原则：
- KISS Keepit simple stupid 尽可能简单
- YAGNI you ain't Gonna Need it  你不会需要他，不应过多考虑理论需求

Smell 缺陷：僵化性、脆弱性、顽固性、粘滞性、不必要的复杂、不必要的重复、晦涩性

### 设计优化的思想

运行时的多态：多态性在结构上形成类的继承层次。重写要求：细节调整，子类条件限制比父类宽松

耦合的消息链：交互集中的设计与交互分散的设计

![[Pasted image 20231121223507.png]]


狎昵关系：两个类表现的过分亲密，即高耦合

![[Pasted image 20231121223934.png]]


被拒绝的遗赠：对类进行需求的扩展，一是继承，二是委托(聚合/关联)

循环依赖：两个类分别处于不同的包中，并且具有双向导航的关联关系。引用接口类消除循环依赖

![[Pasted image 20231121224256.png]]


### 设计原则

接口隔离原则 ISP ：
- 尽量使用接口继承，而不是实现继承
- 接口在这里充当类的视图

好处：当业务需求发生变化时，更容易发生变化的是具体类，而这些变更可以通过稳定的抽象类进行隔离，提高了系统的可维护性

![[Pasted image 20231121231642.png]]





依赖倒置原则 DIP ： 依赖于抽象，而不是依赖于具体

![[Pasted image 20231121231940.png]]

开放封闭原则 OCP ：模块对于一个扩展应该是开放的，对于修改则是封闭的，这条原则是面向对象的最高境界、
- 模块的行为可以被扩展
- 模块的源代码不需要进行修改

OCP是相对的，没有绝对的OCP设计

![[Pasted image 20231121232228.png]]
![[Pasted image 20231121232240.png]]


Liskov原则 LSP ： 任何出现父类的地方都应该能使用子类对其进行无条件的替换

单一职责原则 SRP ： 设计类的功能应该只有一个

合成/聚合复用原则 CARP： 委托/聚合

#### 设计模式

提供了相似的程序设计任务中经常出现的相同问题的解决方案。一种在设计层次上的重用机制。一方面，模式针对的是抽象的设计思想的重用，而非代码的物理重用，另一方面，模式并不对具体问题提供完整的解决方案，而是提供方案的一种结构

三类设计模式：
- 创建模式 : 抽象工厂模式 单例模式
- 结构模式 : 适配器模式 桥模式 装饰模式 门面模式 代理模式
- 行为模式 : 观察者模式 策略模式 状态模式 

抽象工厂模式：解耦客户类在创建产品时引入的耦合

![[Pasted image 20231130191153.png]]


单例模式：在系统中只有一个实例，并且不允许生成其他副本

- 单例模式类的所有所有构造方法都是私有的，防止被外部创建
- 提供一个公有的静态方法获取该类的实例
- 类的实例变量为私有的或者受保护的

适配器模式：把一个类的接口变换成客户类所期待的另一种接口，从而使原本因接口原因不匹配而无法一起工作的两个类能够一起工作。实现：委托/继承


![[Pasted image 20231130191623.png]]![[Pasted image 20231130191631.png]]

桥模式：将抽象与实现分离

![[Pasted image 20231130191902.png]]






......

代理模式：一般用于对稀缺资源的管理，如数据库的连接等，目的是提高这些资源的利用率或者系统性能。为这些资源对象提供一个代理对象，并由代理对象控制对资源的使用，起到中介的作用

![[Pasted image 20231130192228.png]]


观察者模式：定义一种一对多的依赖关系，让多个观察者同时监听一个主题对象，观察者相对于MVC中的视图

![[Pasted image 20231130192437.png]]





## 软件测试

软件测试的基本原理是根据用户需求的满足情况判断软件的质量情况


- 形式化验证方法
- 测试技术 ：测试分类 测试策略
- 软件度量

等价类分析与基于控制流的测试

形式化验证

![[Pasted image 20231202151758.png]]










